# This file will be used to generate all of the schema-*.json files in a bundle
schema: draft-07
name: "aws-apigateway-rest-api"
description: "Serverless Rest API which can be integrated with various AWS services"
source_url: github.com/massdriver-cloud/aws-apigateway-rest-api
access: "private"
type: "infrastructure"

CloudWatchAlarmMetricInteger: &cloudwatch_alarm_metric_integer
  required:
    - threshold
    - period
  properties:
    threshold:
      type: integer
      title: Threshold
    period:
      type: integer
      title: Period
      minimum: 1




tests:
  - name: "Test_Song_Similiarities"
  - description: "Test the response of the LLM for it's acurracy in predicting a song similar enough to the requested song to be considered a match"
  - test_type: "functional"
  - test:
      name: "Test_Song_Similiarities"
      description: "Test the response of the LLM for it's acurracy in predicting a song similar enough to the requested song to be considered a match"
      test_type: "functional"
      request:
        method: "POST"
        url: "https://api.massdriver.cloud/llm/song_similarities"
        headers:
          Content-Type: "application/json"
        body:
          song_id: "5b4a1c9a-6f9a-4a9e-8a2b-3b9f1b4f1f5a"
          threshold: 0.5
          period: 1
      response:
        status_code: 200
        headers:
          Content-Type: "application/json"
        body:
          type: "object"
          properties:
            song_id:
              type: "string"
            song_name:
              type: "string"
            artist_name:
              type: "string"
            album_name:
              type: "string"
            album_release_date:
              type: "string"